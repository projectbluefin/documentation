---
phase: 01-biweekly-reports
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - docusaurus.config.ts
  - package.json
  - .github/workflows/biweekly-reports.yml
autonomous: false

must_haves:
  truths:
    - "Docusaurus site has separate /reports blog route"
    - "Reports RSS feed is auto-generated at /reports/rss.xml"
    - "GitHub Actions workflow runs biweekly on Mondays"
    - "Workflow generates reports and commits them automatically"
    - "Manual workflow trigger works for testing"
  artifacts:
    - path: "docusaurus.config.ts"
      provides: "Multi-blog configuration for reports"
      contains: 'id: "reports"'
      min_lines: 250
    - path: ".github/workflows/biweekly-reports.yml"
      provides: "GitHub Actions automation workflow"
      contains: "cron:"
      min_lines: 50
    - path: "package.json"
      provides: "npm script for report generation"
      contains: '"generate-report"'
  key_links:
    - from: ".github/workflows/biweekly-reports.yml"
      to: "scripts/generate-report.js"
      via: "npm run command"
      pattern: "npm run generate-report"
    - from: "docusaurus.config.ts"
      to: "reports/"
      via: "blog plugin path config"
      pattern: "path:.*reports"
---

<objective>
Configure Docusaurus multi-blog for reports and automate biweekly report generation with GitHub Actions.

Purpose: Complete the end-to-end automation by configuring the reports blog instance and scheduling workflow execution.
Output: Live /reports route, automated report generation every other Monday, manual testing capability.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-biweekly-reports/01-CONTEXT.md
@.planning/phases/01-biweekly-reports/01-RESEARCH.md
@.planning/phases/01-biweekly-reports/01-01-SUMMARY.md
@.planning/phases/01-biweekly-reports/01-02-SUMMARY.md
@docusaurus.config.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Docusaurus multi-blog</name>
  <files>docusaurus.config.ts</files>
  <action>
Add second blog instance configuration to `docusaurus.config.ts` following RESEARCH.md Pattern 2 (lines 183-216):

1. **Find the plugins array** in the exported config object

2. **Add new blog plugin instance** AFTER the existing blog configuration:

   ```typescript
   [
     "@docusaurus/plugin-content-blog",
     {
       id: "reports",
       routeBasePath: "reports",
       path: "./reports",
       blogTitle: "Biweekly Reports",
       blogDescription:
         "Automated project activity reports from GitHub Project Board",
       blogSidebarTitle: "Recent Reports",
       blogSidebarCount: 10,
       postsPerPage: 20,
       showReadingTime: false, // System-generated content
       feedOptions: {
         type: "all",
         title: "Project Bluefin - Biweekly Reports",
         description: "Automated biweekly activity reports from project board",
         copyright: `Copyright © ${new Date().getFullYear()} Project Bluefin`,
       },
     },
   ];
   ```

3. **Add navbar link** to themeConfig.navbar.items array:
   ```typescript
   { to: '/reports', label: 'Reports', position: 'left' }
   ```

**Critical configuration points:**

- `id: 'reports'` - Required for multi-instance plugins (distinguishes from main blog)
- `routeBasePath: 'reports'` - Sets URL path to /reports instead of /blog
- `showReadingTime: false` - Appropriate for auto-generated content (no meaningful reading time)
- `postsPerPage: 20` - Biweekly reports = ~26 per year, show more per page

**Placement:** Insert navbar link AFTER "Changelogs" link but BEFORE right-aligned links

**Reference:** RESEARCH.md Pattern 2 (lines 183-216) for exact syntax and options
</action>
<verify>

```bash
npm run typecheck
grep 'id: "reports"' docusaurus.config.ts
grep "to: '/reports'" docusaurus.config.ts
npm run build
```

  </verify>
  <done>Multi-blog configured, navbar link added, TypeScript passes, build succeeds</done>
</task>

<task type="auto">
  <name>Task 2: Add npm script for report generation</name>
  <files>package.json</files>
  <action>
Add new npm script to `package.json` scripts section:

```json
{
  "scripts": {
    "generate-report": "node scripts/generate-report.js"
  }
}
```

**Placement:** Add after existing fetch-data scripts (near `fetch-feeds`, `fetch-playlists`, etc.)

**Purpose:** Provides standard npm interface for report generation, used by GitHub Actions workflow and local testing

**Usage:**

- In CI: `npm run generate-report` (with GITHUB_TOKEN from secrets)
- Locally: `GITHUB_TOKEN=xxx npm run generate-report` (for testing)
  </action>
  <verify>

```bash
grep "generate-report" package.json
npm run generate-report -- --help 2>&1 || true
# Should show error about GITHUB_TOKEN missing (expected)
```

  </verify>
  <done>npm script added, can be invoked via npm run generate-report</done>
</task>

<task type="auto">
  <name>Task 3: Create GitHub Actions workflow</name>
  <files>.github/workflows/biweekly-reports.yml</files>
  <action>
Create `.github/workflows/biweekly-reports.yml` following RESEARCH.md Implementation Notes (lines 674-717):

```yaml
name: Generate Biweekly Report

on:
  schedule:
    # Every Monday at 10:00 UTC (biweekly filtering in script)
    - cron: "0 10 * * 1"
  workflow_dispatch: # Allow manual triggering for testing

permissions:
  contents: write # For git commits
  pull-requests: read # For GraphQL queries

jobs:
  generate-report:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Full history for contributor tracking

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"

      - name: Install dependencies
        run: npm ci

      - name: Generate biweekly report
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: npm run generate-report

      - name: Commit and push report
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add reports/ static/data/contributors-history.json
          git diff --staged --quiet || git commit -m "docs(reports): add biweekly report for $(date -I)"
          git push
```

**Key configuration points:**

1. **Cron schedule:** `0 10 * * 1` = Every Monday at 10:00 UTC
   - Script handles biweekly filtering (even/odd week check)
   - Runs weekly but exits early on odd weeks (see RESEARCH.md Pitfall 6)

2. **workflow_dispatch:** Enables manual triggering for testing via GitHub UI

3. **Permissions:**
   - `contents: write` - Needed to commit generated reports
   - `pull-requests: read` - Needed for GraphQL project board queries

4. **Commit strategy:**
   - Adds both `reports/` and `contributors-history.json`
   - Only commits if there are changes (`git diff --staged --quiet || ...`)
   - Uses github-actions[bot] as commit author

5. **Dependencies:** Uses `npm ci` for faster, reproducible installs

**Critical:** `fetch-depth: 0` gets full git history, needed for contributor tracking to work correctly

**Testing:** Can be triggered manually via GitHub Actions UI -> "Run workflow" button
</action>
<verify>

```bash
test -f .github/workflows/biweekly-reports.yml && echo "Workflow created"
grep "cron:" .github/workflows/biweekly-reports.yml
grep "workflow_dispatch" .github/workflows/biweekly-reports.yml
```

  </verify>
  <done>GitHub Actions workflow created with biweekly schedule and manual trigger</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete automated biweekly reports system:
- GraphQL data fetching infrastructure (Plan 01)
- Report generation and markdown formatting (Plan 02)  
- Docusaurus multi-blog configuration (Plan 03)
- GitHub Actions automation workflow (Plan 03)
  </what-built>
  <how-to-verify>
**Step 1: Verify build succeeds**
```bash
npm run typecheck
npm run build
```
Expected: Both pass with 0 errors

**Step 2: Start development server**

```bash
npm start
```

Expected: Server starts successfully

**Step 3: Verify /reports route**

1. Navigate to `http://localhost:3000/reports`
2. Should see "Biweekly Reports" page (empty or with placeholder)
3. Check navbar has "Reports" link
4. Verify page loads without errors

**Step 4: Verify RSS feed**
Navigate to `http://localhost:3000/reports/rss.xml`
Expected: Valid RSS/XML (even if empty)

**Step 5: Test manual report generation** (optional if you have GITHUB_TOKEN)

```bash
export GITHUB_TOKEN="your-personal-access-token"
npm run generate-report
```

Expected outcomes:

- If odd week: "Skipping report (odd week)" message
- If even week: Report generated in `reports/YYYY-MM-DD-report.md`
- If even week: Check report format matches reference

**Step 6: Verify GitHub Actions workflow**

1. Commit and push all changes
2. Go to GitHub repo -> Actions tab
3. Find "Generate Biweekly Report" workflow
4. Verify it appears in workflows list
5. (Optional) Click "Run workflow" to test manual trigger

**Verification checklist:**

- [ ] TypeScript compilation passes
- [ ] Build succeeds
- [ ] Development server starts
- [ ] /reports route accessible
- [ ] RSS feed validates
- [ ] Navbar has Reports link
- [ ] GitHub Actions workflow file exists
- [ ] Manual report generation works (if tested)
      </how-to-verify>
      <resume-signal>
      Type "approved" if all checks pass, or describe issues encountered
      </resume-signal>
      </task>

</tasks>

<verification>
After completing all tasks and human verification passes:

1. **Configuration applied:**

   ```bash
   grep 'id: "reports"' docusaurus.config.ts
   grep "generate-report" package.json
   ```

2. **Workflow exists:**

   ```bash
   cat .github/workflows/biweekly-reports.yml
   ```

3. **TypeScript clean:**

   ```bash
   npm run typecheck
   ```

4. **Build succeeds:**

   ```bash
   npm run build
   ```

5. **Reports route works:**
   - Start dev server: `npm start`
   - Visit: http://localhost:3000/reports
   - Check RSS: http://localhost:3000/reports/rss.xml
     </verification>

<success_criteria>

- ✅ docusaurus.config.ts has reports blog plugin with id: 'reports'
- ✅ Navbar has Reports link pointing to /reports
- ✅ package.json has generate-report npm script
- ✅ .github/workflows/biweekly-reports.yml exists with cron schedule
- ✅ Workflow has workflow_dispatch for manual triggering
- ✅ npm run typecheck passes
- ✅ npm run build succeeds
- ✅ /reports route accessible in development
- ✅ RSS feed available at /reports/rss.xml
- ✅ Human verification passes all checks
  </success_criteria>

<output>
After completion, create `.planning/phases/01-biweekly-reports/01-03-SUMMARY.md`
</output>
